/* https://github.com/restimel/i18n-js-formatter */
!function(){"use strict";function i18n(sentence){var args,text=_translation(void 0,sentence);return args=sentence instanceof Array&&arguments[1]instanceof Array?arguments[1]:Array.prototype.slice.call(arguments,1),text=_parse.apply(this,[text].concat(args)),statusVariables._currentLocale&&(statusVariables.currentLocale=statusVariables._currentLocale,statusVariables._currentLocale=null),text}function _reset(){statusVariables={locales:{},localeKeys:[],defaultKeyLocale:void 0,currentLocale:null,_currentLocale:null,useDfltLocale:!0,storage:{kind:"none",name:""},data:{},loadingMethod:{},syncLoading:!1,lazyLoading:!0,onLocaleReady:null,formatter:[],status:{callLocaleLoaded:!1},defaultFormat:_extend({},defaultFormat),log:{info:null,warn:null,error:null}}}function _resetDataKey(key){statusVariables.data[key]=null}function _createLocale(key,name){var dflt,locale;return key=key.toLowerCase(),dflt=statusVariables.locales[key]||{},locale={key:key,name:_default(name,dflt.name),secondary:!1,formatRules:_extend({},defaultRules)}}function _cleanData(){_each(statusVariables.data,function(value,key){statusVariables.localeKeys.indexOf(key)===-1&&delete statusVariables.data[key]}),statusVariables.localeKeys.forEach(function(key){statusVariables.data[key]||_resetDataKey(key)})}function _prepareLocale(key){var stv=statusVariables.locales[key],currentStv={formatRules:{}};_each(stv,function(v,k){"formatRules"===k?currentStv.formatRules=_extend({},v):currentStv[k]=v});for(var list=[];stv.secondary&&list.indexOf(stv.secondary)===-1;)list.push(stv.secondary),stv=statusVariables.locales[stv.secondary],currentStv.formatRules=_extend(stv.formatRules,currentStv.formatRules,!0);statusVariables.currentLocale=currentStv}function _configureLocaleSet(options){var nextLocales={},needLoading=!1;return statusVariables.localeKeys=[],options.localeSet.forEach(function(localeObj){var key,name,secondary,formatRules,dataDictionary,locale,data;if("object"==typeof localeObj){if(key=localeObj.localeKey||localeObj.key||localeObj.locale,name=localeObj.localeName||localeObj.name,secondary=localeObj.secondary,formatRules=localeObj.formatRules,dataDictionary=localeObj.data,"string"!=typeof key)return void _warning(4050,["localeSet"]);!name&&options.localeName&&(name=options.localeName[key]),locale=_createLocale(key,name),key=locale.key,"string"==typeof secondary&&(locale.secondary=secondary),"object"==typeof formatRules&&_setFormatRules(formatRules,locale),dataDictionary&&(data={},data[key]=dataDictionary,_loadData(data),needLoading=!0),nextLocales[key]||statusVariables.localeKeys.push(key),nextLocales[key]=locale}}),_cleanData(),statusVariables.locales=nextLocales,needLoading}function _configureLocales(options){var nextLocales={};statusVariables.localeKeys=[],options.locales.forEach(function(key){var locale;"string"==typeof key&&(locale=_createLocale(key,options.localeName&&options.localeName[key]),key=locale.key,nextLocales[key]||statusVariables.localeKeys.push(key),nextLocales[key]=locale)}),_cleanData(),statusVariables.locales=nextLocales}function _configurelocaleNames(options){_each(options.localeName,function(value,key){key=_formatLocaleKey(key),statusVariables.locales[key]&&(statusVariables.locales[key].name=value)})}function _setFormatRules(rules,lng){var locale;"string"==typeof lng?(lng=_formatLocaleKey(lng),locale=statusVariables.locales[lng]):locale=lng,locale&&(_extend(locale.formatRules,rules),rules.number&&rules.number.SIsuffix&&locale.formatRules.number.SIsuffix.sort(function(s1,s2){return s2.multiple-s1.multiple}),rules.string&&rules.string.lowerChars&&(locale.formatRules.string._lowerChars=new RegExp("[^"+rules.string.lowerChars.replace(/([\\\]\/-])/g,"\\$1")+"]+|.","g")),rules.string&&rules.string.upperChars&&(locale.formatRules.string._upperChars=new RegExp("[^"+rules.string.upperChars.replace(/([\\\]\/-])/g,"\\$1")+"]+|.","g")))}function _configureFormatRules(rules){_each(rules,_setFormatRules)}function _configureSecondaries(secondaries){var preparationSecondaries={},errors=!1;return _each(secondaries,function(origValue,key){var value=origValue;if(key=_formatLocaleKey(key),statusVariables.locales[key]){if("string"!=typeof value){if(value!==!1&&null!==value)return void _warning(4031,[key,typeof value]);value=!1}else if(value=_formatLocaleKey(value),!value)return void _warning(4030,[key,origValue]);preparationSecondaries[key]=value}}),_each(preparationSecondaries,function(value,key){for(var list=[key];value!==!1&&list.indexOf(value)===-1;)list.push(value),key=value,value=preparationSecondaries[key],"undefined"==typeof value&&(value=statusVariables.locales[key].secondary);value&&(errors=[7030,[list.join(", ")]])}),errors?void _error.apply(this,errors):void _each(preparationSecondaries,function(value,key){statusVariables.locales[key].secondary=value})}function _configureLog(optLog,kind){statusVariables.log[kind]=optLog}function _configureStorage(options){var type="none";options instanceof Array?options.some(function(opt){var o=opt.replace(/:.*$/,"");switch(o){case"cookie":if(_mayUse.cookie())return type=opt,!0;break;case"localStorage":if(_mayUse.localStorage())return type=opt,!0}}):type=options,type=type.split(":"),statusVariables.storage.kind=type[0],statusVariables.storage.name=type[1]}function _setDefaultFormat(statusVariables,dfltFormat){_extend(statusVariables.defaultFormat,dfltFormat)}function _setStorage(value,reset){switch(statusVariables.storage.kind){case"cookie":reset?document.cookie=statusVariables.storage.name+"=":document.cookie=statusVariables.storage.name+"="+value;break;case"localStorage":reset?self.localStorage.removeItem(statusVariables.storage.name):self.localStorage.setItem(statusVariables.storage.name,value)}}function _getStorage(){var value,srch;switch(statusVariables.storage.kind){case"cookie":srch=statusVariables.storage.name+"=",value=document.cookie.split(";").filter(function(str){return 0===str.indexOf(srch)})[0],value&&(value=value.substr(srch.length+1));break;case"localStorage":value=self.localStorage.getItem(statusVariables.storage.name)}return value}function _getLocale(locale,options){var result,lastResult,nb,ctx;if(options||(options={key:!0}),locale)return options.dataCtx&&(ctx="_ctx:"+options.dataCtx),result={},nb=0,_each(options,function(value,attribute){if(value){switch(attribute){case"dataCtx":return;case"data":lastResult=ctx?statusVariables.data[locale.key]&&statusVariables.data[locale.key][ctx]&&statusVariables.data[locale.key][ctx][value]:statusVariables.data[locale.key]&&statusVariables.data[locale.key][value];break;case"localeKey":case"locale":lastResult=locale.key;break;case"localeName":lastResult=locale.name;break;default:lastResult=locale[attribute]}result[attribute]=lastResult,nb++}}),1===nb?result=lastResult:0===nb&&(result=locale.key),result}function _getDefaultKey(){var key=_getStorage();return key||"string"!=typeof statusVariables.defaultKeyLocale||(key=_formatLocaleKey(statusVariables.defaultKeyLocale)),key||(self.navigator&&self.navigator.languages instanceof Array&&self.navigator.languages.some(function(lng){return key=_formatLocaleKey(lng)}),!key&&self.navigator&&self.navigator.language&&(key=_formatLocaleKey(self.navigator.language)),key||(key=statusVariables.localeKeys[0])),key}function _getCatalog(){var catalog=[];return statusVariables.localeKeys.forEach(function(key){var dico=statusVariables.data[key];dico&&_each(dico,function(v,sentence){catalog.indexOf(sentence)===-1&&catalog.push(sentence)})}),catalog}function _formatLocaleKey(key){for(key=_default(key,""),key=key.toLowerCase();!statusVariables.locales[key]&&key;)key=key.replace(/(?:^|-)[^-]*$/,"");return key}function _addFormatter(formatter,name,weight){return"function"!=typeof formatter?void _error(7200,[name]):("undefined"==typeof weight&&(weight=statusVariables.formatter.length?statusVariables.formatter[statusVariables.formatter.length-1].w-10:100),statusVariables.formatter.push({f:formatter,w:weight,name:name}),statusVariables.formatter.sort(function(a,b){return b.w-a.w}),void("function"==typeof formatter.loaded&&formatter.loaded(i18n)))}function _parse(text){var txt,values;return values=Array.prototype.slice.call(arguments,1),txt=statusVariables.formatter.reduce(function(text,formatter){try{text=formatter.f(text,values,statusVariables)}catch(e){_warning(4200,[formatter.name,e.message])}return text},text)}function _loadDictionary(dictionary){switch(typeof dictionary){case"object":_addDictionary(dictionary);break;case"function":_addDictionary(dictionary());break;case"string":_ajax(dictionary,_addDictionary);break;default:_error(7010,[typeof dictionary,dictionary])}}function _loadData(dictionary,key){var addData=key?_addDataWithKey:_addData;switch(typeof dictionary){case"object":addData(dictionary,key);break;case"function":addData(dictionary(key),key);break;case"string":_ajax(dictionary,addData,key);break;default:key?_error(7013,[key,typeof dictionary,dictionary]):_error(7012,[typeof dictionary,dictionary])}}function _loadCurrentLocale(){var key=statusVariables.currentLocale.key,method=statusVariables.loadingMethod[key],dictionary=statusVariables.data[key];if(statusVariables.status.callLocaleLoaded=!0,dictionary&&"object"==typeof dictionary)_localeReady();else switch(typeof method){case"function":_addDataWithKey(method(key),key);break;case"string":_ajax(method,_addDataWithKey,key);break;case"undefined":_localeReady();break;default:_error(7013,[key,typeof method,method]),_localeReady()}}function _addDictionary(dictionary){_each(dictionary,_addItem),_localeReady()}function _addData(dictionary){var loadData=statusVariables.lazyLoading?_saveData:_loadData;return"object"!=typeof dictionary?void _error(7012,[typeof dictionary,dictionary]):(_each(dictionary,loadData),void(statusVariables.status.callLocaleLoaded===!0&&_localeReady()))}function _addDataWithKey(dico,key){dico&&(_addDataByKey(dico,key),statusVariables.status.callLocaleLoaded===!0&&_localeReady())}function _saveData(dico,key){dico&&("object"==typeof dico?_addDataWithKey(dico,key):statusVariables.loadingMethod[key]=dico)}function _addDataByKey(dico,key){return"object"==typeof dico[key]&&(dico=dico[key]),"object"!=typeof dico?void _error(7014,[key,typeof dico,dico]):void _each(dico,function(value,sentenceKey){var obj={};checkCtx.test(sentenceKey)?_each(value,function(v,sk){obj[sk]||(obj[sk]={}),obj[sk][key]=v}):obj[key]=value,_addItem(obj,sentenceKey)})}function _addCtxItem(ctxSentence,values,sentenceKey){return"object"!=typeof values?void _error(7011,[typeof values,values]):(ctxSentence="_ctx:"+ctxSentence,void _each(values,function(value,key){var dico=statusVariables.data[key];if("string"!=typeof value)return void _error(7015,[sentenceKey,key,typeof value,value]);if(!dico){if(null!==dico)return;dico=statusVariables.data[key]={}}dico[ctxSentence]||(dico[ctxSentence]={}),dico[ctxSentence][sentenceKey]=value}))}function _addItem(values,sentenceKey){return"object"!=typeof values?void _error(7011,[typeof values,values]):checkCtx.test(sentenceKey)?void _each(values,_addCtxItem.bind(this,sentenceKey.slice(5))):void _each(values,function(value,key){var dico=statusVariables.data[key];if("string"!=typeof value)return void _error(7015,[sentenceKey,key,typeof value,value]);if(!dico){if(null!==dico)return;dico=statusVariables.data[key]={}}dico[sentenceKey]=value})}function _ajax(url,success,key){function _manageResponse(response){var json;try{json=JSON.parse(response)}catch(e){_error(7020,[url,response])}return json}var rslt,xhr=new XMLHttpRequest;statusVariables.syncLoading?(xhr.open("GET",url,!1),xhr.send(null),200===xhr.status||0===xhr.status?(rslt=_manageResponse(xhr.responseText),rslt&&success(rslt,key)):_error(8e3+xhr.status,[url])):(xhr.onreadystatechange=function(){xhr.readyState===xhr.DONE&&(200===xhr.status||0===xhr.status?(rslt=_manageResponse(xhr.responseText),rslt&&success(rslt,key)):_error(8e3+xhr.status,[url]))},xhr.open("GET",url,!0),xhr.send(null))}function _localeReady(){statusVariables.status.callLocaleLoaded===!0&&"function"==typeof statusVariables.onLocaleReady&&_hasDataKey(statusVariables.currentLocale.key)&&(statusVariables.status.callLocaleLoaded=!1,statusVariables.onLocaleReady(statusVariables.currentLocale.key))}function _hasDataKey(key){var hasData="object"==typeof statusVariables.data[key]&&null!==statusVariables.data[key],secondary=statusVariables.locales[key].secondary;return hasData&&(!secondary||secondary&&_hasDataKey(secondary))}function _translation(context,sentenceKey,key,origKey){var sentence;switch(key=key||statusVariables.currentLocale.key,origKey=origKey||key,typeof sentenceKey){case"string":sentence=_translationString(context,sentenceKey,key,origKey);break;case"object":sentence=sentenceKey instanceof Array?_translationString(context,sentenceKey.join(""),key,origKey):_translationObject(context,sentenceKey,key,origKey);break;default:sentence="",_error(7100,[typeof sentenceKey,sentenceKey])}return sentence}function _translationString(context,sentenceKey,key,origKey){var ldata,sentence,ctx;return ldata=statusVariables.data[key],context?(ctx="_ctx:"+context,sentence=ldata&&ldata[ctx]&&ldata[ctx][sentenceKey]):sentence=ldata&&ldata[sentenceKey],sentence=_translationFallback(context,sentenceKey,key,origKey,sentence,_translationIssueString)}function _translationIssueString(context,sentenceKey,origKey){return _warning(4100,[sentenceKey,origKey]),sentenceKey}function _translationObject(context,sentenceObject,key,origKey){var sentence,ctx,str,lng,slng;return sentenceObject.str||sentenceObject.string?(ctx=sentenceObject.c||sentenceObject.ctx||sentenceObject.context,str=sentenceObject.str||sentenceObject.string,slng=sentenceObject.locale||sentenceObject.lng,lng=_formatLocaleKey(slng)||key,slng&&(statusVariables._currentLocale=statusVariables.currentLocale,_prepareLocale(lng)),sentenceObject.parse?str:_translationString(ctx,str,lng,origKey)):(sentence=sentenceObject[key],sentence=_translationFallback(context,sentenceObject,key,origKey,sentence,_translationIssueObject))}function _translationIssueObject(context,sentenceKey,origKey){var json;try{json=JSON.stringify(sentenceKey)}catch(e){json=sentenceKey.toString()}return _warning(4101,[json,origKey,sentenceKey]),""}function _translationFallback(context,sentenceKey,key,origKey,sentence,notTranslated){var secondary;return"string"!=typeof sentence&&(secondary=statusVariables.locales[key].secondary,sentence=secondary?_translation(context,sentenceKey,secondary,origKey):notTranslated(context,sentenceKey,origKey)),sentence}function _warning(code,details){var message=_getMessage(code,details);"function"==typeof statusVariables.log.warn?statusVariables.log.warn(code,message,details):console.warn(message)}function _error(code,details){var message=_getMessage(code,details);"function"==typeof statusVariables.log.error?statusVariables.log.error(code,message,details):console.error(message)}function _getMessage(code,details){var idx,message=_codeMessage[code];return message?(idx=0,message=message.replace(/%s/g,function(){return details[idx++]})):message="unknown code ("+code+") with details ("+details+")",message}function _export(name){"undefined"!=typeof exports?exports[name]=i18n:(self[name]=i18n,"function"==typeof define&&define.amd&&define(function(){var obj={};return obj[name]=i18n,obj}))}function _default(value,dfltValue){return"undefined"==typeof value?dfltValue:value}function _extend(origObj,extendObj,doNotModify){return doNotModify&&(origObj=_extend({},origObj)),_each(extendObj,function(value,key){if("object"!=typeof value)origObj[key]=value;else{if(value instanceof Array)origObj[key]=[];else{if(value instanceof RegExp)return void(origObj[key]=value);"object"!=typeof origObj[key]&&(origObj[key]={})}_extend(origObj[key],value)}}),origObj}function _each(object,iteratee,context){var x,f;f="undefined"!=typeof context?iteratee.bind(context):iteratee;for(x in object)object.hasOwnProperty(x)&&f(object[x],x,object)}var statusVariables,version="0.4.0",_codeMessage={4030:'The secondary fallback of "%s" cannot be set to "%s" because it is out of locales scope. This setting has been ignored.',4031:'The secondary fallback of "%s" cannot be of type "%s". It must be a string or false. This setting has been ignored.',4050:"The configuration option %s is badly set because there is no valid key defined. This setting has been ignored.",4100:'The sentence "%s" is not translated for language "%s".',4101:'It is not possible to translate object (%s) to language "%s".',4200:'Formatter "%s" has thrown an issue: %s',4300:'Feature "%s" is not available.',7010:"dictionary is in a wrong format (%s): %s",7011:"item is in a wrong format (%s while object is expected): %s",7012:"data is in a wrong format (%s): %s",7013:'data with key "%s" is in a wrong format (%s): %s',7014:'data for key "%s" can not be loaded due to wrong format (%s while object is expected): %s',7015:'item "%s" for locale "%s" is %s instead of string: %s',7020:'data recieved from "%s" is not in a valid JSON ("%s")',7030:"The secondaries fallback create a circular loop (%s).",7100:"Translation is not possible due to an unsupported type (%s): %s",7200:"Formatter %s can not be added because it is not a function.",7300:'Browser does not support feature "%s".',8401:"Unauthorized request: %s",8403:"Request forbidden: %s",8404:"Page not found: %s",8405:"Method is not allowed: %s",8407:"Proxy authentication required: %s",8408:"Request timeout: %s",8418:"Sorry, I cannot brew your coffee: %s",8500:"Internal server error: %s",8501:"Not implemented (server error): %s",8502:"Bad Gateway: %s",8503:"Service on server is unavailable: %s",8504:"Gateway timeout: %s",8505:"HTTP version is not supported by server: %s"},defaultRules={number:{thousandSeparator:",",decimalSeparator:".",exponentialSeparator:"e",SIsuffix:[{suffix:"P",multiple:1e15},{suffix:"T",multiple:1e12},{suffix:"G",multiple:1e9},{suffix:"M",multiple:1e6},{suffix:"k",multiple:1e3},{suffix:"",multiple:1},{suffix:"m",multiple:.001},{suffix:"µ",multiple:1e-6},{suffix:"n",multiple:1e-9},{suffix:"p",multiple:1e-12},{suffix:"f",multiple:1e-15}]},duration:{y:"y",month:"M",d:"d",h:"h",min:"min",s:"s",ms:"ms","µs":"µs"},string:{lowerChars:"",upperChars:""}},defaultFormat={string:{escape:"no"}},checkCtx=/^_ctx:/;_reset(),i18n.context=function(context,sentence){var text=_translation(context,sentence),args=Array.prototype.slice.call(arguments,1);return text=_parse.apply(this,[text].concat(args))},i18n.c=i18n.context,i18n.configuration=function(options){options||(options={});var needLoading="undefined"!=typeof options.dictionary||"undefined"!=typeof options.data;"object"==typeof options.log&&_each(options.log,_configureLog),options.localeSet&&options.localeSet instanceof Array?needLoading=_configureLocaleSet(options)||needLoading:options.locales instanceof Array?_configureLocales(options):"object"==typeof options.localeName&&_configurelocaleNames(options),"object"==typeof options.secondary&&_configureSecondaries(options.secondary),"object"==typeof options.formatRules&&_configureFormatRules(options.formatRules),"string"==typeof options.alias&&_export(options.alias),"undefined"!=typeof options.onLocaleReady&&(statusVariables.onLocaleReady=options.onLocaleReady),"boolean"==typeof options.syncLoading&&(statusVariables.syncLoading=options.syncLoading),"boolean"==typeof options.lazyLoading&&(statusVariables.lazyLoading=options.lazyLoading),needLoading&&(statusVariables.status.callLocaleLoaded=!0),"undefined"!=typeof options.dictionary&&_loadDictionary(options.dictionary),"undefined"!=typeof options.data&&_loadData(options.data),"undefined"!=typeof options.storage&&(_configureStorage(options.storage),statusVariables.useDfltLocale||_setStorage(statusVariables.currentLocale.key)),"object"==typeof options.defaultFormat&&_setDefaultFormat(statusVariables,options.defaultFormat),"undefined"!=typeof options.defaultLocale&&(statusVariables.defaultKeyLocale=options.defaultLocale),statusVariables.useDfltLocale&&statusVariables.localeKeys.length&&_prepareLocale(_getDefaultKey()),needLoading&&statusVariables.lazyLoading&&_loadCurrentLocale()},i18n.setLocale=function(key){var useDflt="undefined"==typeof key,saveChanged=!0;return key=useDflt?_getDefaultKey():_formatLocaleKey(key),key===statusVariables.currentLocale.key?key=!1:statusVariables.locales[key]?(_prepareLocale(key),_loadCurrentLocale()):(key=!1,saveChanged=!1),saveChanged&&(statusVariables.useDfltLocale=useDflt,_setStorage(i18n.getLocale(),statusVariables.useDfltLocale)),key},i18n.getLocale=function(options){return _getLocale(statusVariables.currentLocale,options)},i18n.getLocales=function(options){return statusVariables.localeKeys.map(function(key){return _getLocale(statusVariables.locales[key],options)})},i18n.getData=function(options){var rslt,dico,opt="object"==typeof options?options:{},key=("string"==typeof options?options:opt.key||opt.locale)||"",format=opt.format||"data";return key=_formatLocaleKey(key),dico=statusVariables.data[key],"dictionary"===format?(rslt={},_getCatalog().forEach(function(sentence){rslt[sentence]={},checkCtx.test(sentence)?dico&&dico[sentence]?_each(dico[sentence],function(value,sentenceKey){rslt[sentence][sentenceKey]||(rslt[sentence][sentenceKey]={}),rslt[sentence][sentenceKey][key]=value}):statusVariables.localeKeys.forEach(function(key){statusVariables.data[key]&&statusVariables.data[key][sentence]&&_each(statusVariables.data[key][sentence],function(value,sentenceKey){rslt[sentence][sentenceKey]||(rslt[sentence][sentenceKey]={}),rslt[sentence][sentenceKey][key]=value})}):dico&&dico[sentence]?rslt[sentence][key]=dico[sentence]:statusVariables.localeKeys.forEach(function(key){statusVariables.data[key]&&statusVariables.data[key][sentence]&&(rslt[sentence][key]=statusVariables.data[key][sentence])})})):rslt=key&&"undefined"!=typeof dico?dico:statusVariables.data,rslt},i18n.addItem=function(sentenceKey,values){_addItem(values,sentenceKey)},i18n.addCtxItem=function(context,sentenceKey,values){_addCtxItem(context,values,sentenceKey)},i18n.loadFormatter=function(options){"object"!=typeof options&&(options={formatter:options});var formatter=options.formatter,name=options.name||formatter.name||"",weight=options.weight;_addFormatter(formatter,name,weight)},i18n.parse=_parse,i18n.clearData=function(key){"undefined"==typeof key?(statusVariables.data={},statusVariables.localeKeys.forEach(_resetDataKey)):(key=_formatLocaleKey(key),statusVariables.data[key]&&_resetDataKey(key))},i18n.getRules=function(key){var useDflt="undefined"==typeof key;return key=useDflt?statusVariables.currentLocale.key:_formatLocaleKey(key),statusVariables.locales[key]&&statusVariables.locales[key].formatRules||{}},i18n.html=function(selector){if(selector?selector instanceof NodeList||selector instanceof Array||(selector=[selector]):selector=[self.document],self.document&&"function"!=typeof self.document.querySelectorAll)return _error(7300,["querySelectorAll"]),!1;if(self.document&&self.document.body&&!self.document.body.dataset)return _error(7300,["dataset"]),!1;for(var idxRoot=0;idxRoot<selector.length;idxRoot++){var rootEl=selector[idxRoot];if(rootEl||(rootEl=self.document),"function"==typeof rootEl.querySelectorAll)for(var els=rootEl.querySelectorAll("[data-i18n]"),nbEl=els.length,i=0;i<nbEl;i++){var el=els[i];if(el.dataset){var key=el.dataset.i18n;el.textContent=i18n(key)}else _warning(4300,["dataset"])}else _warning(4300,["querySelectorAll"])}},i18n.version=function(){return version},i18n._reset=_reset;var _mayUse={cookie:function(){return!(!self.document||!document.cookie)},localStorage:function(){return!!self.localStorage}};"object"==typeof _i18n_config?(i18n.configuration(_i18n_config),_i18n_config.doNotAliasi18n||_export("i18n")):_export("i18n")}(),function(){"use strict";function s_formatter(text,values,statusVariable){function noValue(){count--}function replacement(pattern,arg,variation,tag){var value,formatter;return formatter=tagList[tag],"function"!=typeof formatter?pattern:(count++,arg?(arg=arg.slice(1,-1),/\d+/.test(arg)?value=values[parseInt(arg,10)-1]:(arg=arg.split("."),value=arg.reduce(function(obj,property){return"undefined"!=typeof obj&&(obj=obj[property]),obj},values[0]))):value=values[count],variation=variation?variation.slice(1,-1).split(",").map(function(v){return v.trim()}):[],formatter.call(s_formatter.i18n,{tag:tag,variation:variation,value:value,formatRules:statusVariable.currentLocale.formatRules,defaultFormat:statusVariable.defaultFormat,locale:statusVariable.currentLocale.key,noValue:noValue}))}var count=-1;return text=text.replace(/%(\([^\)]+\))?(\{[^\}]*\})?(.)/g,replacement)}function addRule(tags,callback){"string"==typeof tags&&(tags=tags.split("")),tags.forEach(function(tag){tagList[tag]=callback})}function buildX0(nb){var result=[];if(nb=+nb,!nb)return"";for(;result.length<nb;)result.push("0");return result.join("")}function getNumber(value,variation){var splitValue,nb,inb,status;return nb=value,"number"!=typeof nb&&(inb=+nb,"string"!=typeof nb&&(nb=inb),("string"==typeof nb&&inb.toString()===nb||isNaN(inb))&&(nb=inb)),splitValue=nb.toString().split("."),status={number:nb,integer:splitValue[0],decimal:splitValue[1]},variation&&variation.forEach(function(code){var nb=parseInt(code.slice(1),10);if(!isNaN(nb))switch(code.charAt(0)){case".":status.decimal&&(status.decimal.length>nb||"0"===status.decimal.charAt(status.decimal.length-1))&&(status.decimal=(Math.round(("0."+status.decimal)*Math.pow(10,nb))/Math.pow(10,nb)).toString().slice(2));break;case"p":status.integer.length<nb&&(status.integer=buildX0(nb-status.integer.length)+status.integer);break;case"d":status.decimal||(status.decimal=""),status.decimal.length<nb&&(status.decimal+=buildX0(nb-status.decimal.length))}}),status}function rawNumber(origValue,variation){var status=getNumber(origValue,variation),result=[status.integer];return status.decimal&&result.push(".",status.decimal),result.join("")}function prettyNumber(origValue,variation,isInteger,formatRules){var value,status=getNumber(origValue,variation),integer=status.integer,rules=formatRules.number,thousandSeparator=rules.thousandSeparator,decimalSeparator=rules.decimalSeparator;return value=integer.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+thousandSeparator),!isInteger&&status.decimal&&(value=[value,decimalSeparator,status.decimal].join("")),value}function shortNumber(origValue,variation,formatRules){var value,computeValue,i,sign,suffix;if(origValue=Number(origValue),sign=origValue<0,computeValue=Math.abs(origValue),!isFinite(computeValue))return computeValue;variation?variation.every(function(v){return 0!==v.indexOf(".")})&&variation.unshift(".3"):variation=[".3"],0===origValue&&(computeValue=1),suffix=formatRules.number.SIsuffix,i=0;do value=computeValue/suffix[i].multiple;while(++i<suffix.length&&value<1);return i--,0===origValue&&(value=0),sign&&(value=-value),prettyNumber(value,variation,!1,formatRules)+suffix[i].suffix}function expNumber(origValue,variation,formatRules){var value,splitValue,status,expSep,result;return value=Number(origValue).toExponential(),splitValue=value.split("e"),status=getNumber(splitValue[0],variation),isFinite(status.number)?(expSep=formatRules.number.exponentialSeparator,result=[status.integer],status.decimal&&result.push(".",status.decimal),result.push(expSep,splitValue[1]),result.join("")):status.number}function escapeString(str,rule,defaultFormat){switch("undefined"==typeof rule&&(rule=defaultFormat.string.escape),rule){case"html":case"htm":str=str.replace(/['"<>&]/g,function(p){var code={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;","'":"&#39;"};return code[p]});break;case"uri":case"url":str=encodeURI(str);break;case"uri6":str=encodeURI(str).replace(/%5[BD]/g,function(p){return"%5B"===p?"[":"%5D"===p?"]":void 0});break;case"uric":case"urlc":str=encodeURIComponent(str);break;case"regex":case"regexp":str=str.replace(/[\\\n\r\t\v\b\f^$.()[\]{}?*+|\0]/g,function(p){var code={"\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\b":"\\b","\f":"\\f","\0":"\\0"};return code[p]||"\\"+p});break;case"js":case"json":str=str.replace(/["\\\n\r\t\v\b\f\0]/g,function(p){var code={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b","\b":"\\b","\f":"\\f","\0":"\\u0000"};return code[p]});break;case"no":case"none":case"raw":break;default:console.warn("escape rule %s unknwon",rule)}return str}function toLowerCase(str,formatRules){var rules=formatRules.string;return rules.upperChars?str.replace(rules._upperChars,function(p){var idx=rules.upperChars.indexOf(p);return idx!==-1?rules.lowerChars.charAt(idx):p.toLowerCase()}):str.toLowerCase()}function toUpperCase(str,formatRules){var rules=formatRules.string;return rules.lowerChars?str.replace(rules._lowerChars,function(p){var idx=rules.lowerChars.indexOf(p);return idx!==-1?rules.upperChars.charAt(idx):p.toUpperCase()}):str.toUpperCase()}function getTimeUnitIndex(unit){var index={y:0,month:1,M:1,d:2,h:3,min:4,m:4,s:5,ms:6,i:6,"µs":7,"µ":7}[unit];return"undefined"==typeof index?-1:index}function getTimestamp(value,variation){var unit,code,index,multiplier;return variation.length&&(code=variation.filter(function(v){return 0===v.indexOf("u:")})[0]),unit=code?code.substr(2):"ms",index=getTimeUnitIndex(unit),multiplier=timeUnitScale[index],multiplier?value*multiplier:value}function durationReplacement(params){function activateUnit(str){var codes=str.match(/\$./g)||[];durationScale.forEach(function(code){code[2]=codes.indexOf(code[0])!==-1})}var microTs,timeUnit,durationScale,durationValue,dfltFormat,format,code,origValue=params.value,variation=params.variation,formatRules=params.formatRules,maxUnit=-1,minUnit=1/0,limit=0;return timeUnit=formatRules.duration,durationScale=[["$y","y",!0],["$M","month",!0],["$d","d",!0],["$h","h",!0],["$m","min",!0],["$s","s",!0],["$i","ms",!0],["$µ","µs",!0]],durationValue=[],dfltFormat=[],microTs=1e3*getTimestamp(origValue,variation),variation.length&&(code=variation.filter(function(v){return 0===v.indexOf('f:"')})[0],code&&(format=code.slice(3,-1),activateUnit(format)),code=variation.filter(function(v){return 0===v.indexOf('f:$"')})[0],code&&(format=code.slice(4,-1).replace(/([yMdhmsiµ$])/g,"$$$1"),activateUnit(format)),code=variation.filter(function(v){return 0===v.indexOf("min:")})[0],code&&(minUnit=getTimeUnitIndex(code.substr(4))),code=variation.filter(function(v){return 0===v.indexOf("max:")})[0],code&&(maxUnit=getTimeUnitIndex(code.substr(4))),code=variation.filter(function(v){return 0===v.indexOf("n:")})[0],code&&(limit=parseInt(code.substr(2),10),maxUnit>=0&&maxUnit+limit>minUnit&&(minUnit=maxUnit+limit-1,limit=0))),timeUnitScale.forEach(function(scale,index){scale*=1e3;var chunk=Math.floor(microTs/scale),code=durationScale[index];return!code[2]||index<maxUnit||index>minUnit?void durationValue.push(0):(chunk&&limit&&(minUnit=index+limit-1,limit=0),microTs-=chunk*scale,durationValue.push(chunk),void(chunk&&dfltFormat.push(code[0]+timeUnit[code[1]])))}),format=format?format:dfltFormat.join(" "),format=format.replace(/\$([yMdhmsiµ$])/g,function(pattern,code){var index="yMdhmsiµ".indexOf(code);return index===-1?"$"===code?code:pattern:prettyNumber(durationValue[index],[],!0,formatRules)})}function stringReplacement(params){var escapeRule,value=params.value,variation=params.variation,defaultFormat=params.defaultFormat,formatRules=params.formatRules;return value="undefined"==typeof value?"undefined":value.toString(),variation.length&&(variation.indexOf("case")!==-1?value=toLowerCase(value,formatRules):variation.indexOf("CASE")!==-1?value=toUpperCase(value,formatRules):variation.indexOf("Case")!==-1?value=toUpperCase(value.charAt(0),formatRules)+toLowerCase(value.slice(1),formatRules):variation.indexOf("CasE")!==-1&&(value=toUpperCase(value.charAt(0),formatRules)+value.slice(1)),variation.forEach(function(v){isEscape.test(v)&&(escapeRule=v.slice(4))})),escapeString(value,escapeRule,defaultFormat)}function numberReplacement(params){var value=params.value,formatRules=params.formatRules,variation=params.variation;switch(params.tag){case"F":return rawNumber(value,variation);
case"f":return prettyNumber(value,variation,!1,formatRules);case"D":return shortNumber(value,variation,formatRules);case"i":return prettyNumber(value,variation,!0,formatRules);case"d":return prettyNumber(value,variation,!0,formatRules);case"e":return expNumber(value,variation,formatRules);default:throw"tag unknown"}}var i18n="i18n",has_i18n_config="object"==typeof _i18n_config,timeUnitScale=[31536e6,2592e6,864e5,36e5,6e4,1e3,1,.001],isEscape=/^esc:/,tagList={};s_formatter.loaded=function(i18n){s_formatter.i18n=i18n,i18n.addRule=addRule,i18n.addRule("s",stringReplacement),i18n.addRule("FfDide",numberReplacement),i18n.addRule("t",durationReplacement),i18n.addRule("%",function(params){return params.noValue(),"%"})},!has_i18n_config&&!self[i18n]||has_i18n_config&&_i18n_config.doNotLoadFormatter?self.s_formatter=s_formatter:(has_i18n_config&&_i18n_config.alias&&(i18n=_i18n_config.alias),self[i18n].loadFormatter(s_formatter,100))}();